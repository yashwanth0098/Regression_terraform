name: Deploy to EKS

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: docker build -t house-price-mlops .
      - run: |
          docker tag house-price-mlops:latest $ECR_URI:latest
          docker push $ECR_URI:latest
      - run: kubectl apply -f k8s/
